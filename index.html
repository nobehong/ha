<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GoldHEN Compatibility Checker 2.0</title>
  <style>
    @keyframes glowPulse {
      0%, 100% { text-shadow: 0 0 8px #ff0000; }
      50% { text-shadow: 0 0 20px #ff5555; }
    }
    body {
      margin: 0; padding: 3rem;
      background: #0a0a0a;
      color: #ff3f3f;
      font-family: "Courier New", Courier, monospace;
      text-align: center;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }
    h1 {
      font-weight: 900;
      font-size: 2.6rem;
      color: #ff0000;
      animation: glowPulse 3s ease-in-out infinite;
      margin-bottom: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      text-shadow: 0 0 10px #ff0000;
    }
    .result {
      margin: 2rem auto;
      max-width: 460px;
      border-radius: 14px;
      border: 3px solid #ff0000;
      padding: 1.4rem 2rem;
      font-size: 1.6rem;
      line-height: 1.4;
      background: #1e0000;
      color: #ff4d4d;
      box-shadow: 0 0 12px #ff0000aa inset;
      user-select: text;
      cursor: default;
      transition: color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
    }
    .result.compatible {
      color: #00ff00;
      border-color: #00ff00;
      background: #002200;
      box-shadow: 0 0 20px #00ff00cc inset;
    }
    .result.not-compatible {
      color: #ff4444;
      border-color: #ff4444;
      background: #330000;
      box-shadow: 0 0 20px #ff4444cc inset;
    }
    .info {
      margin-top: 1rem;
      font-size: 0.85rem;
      font-style: italic;
      color: #888;
      user-select: text;
      max-width: 460px;
      margin-left: auto;
      margin-right: auto;
      word-wrap: break-word;
    }
    button#retry {
      margin-top: 2rem;
      padding: 0.8rem 1.6rem;
      font-family: monospace;
      font-weight: 700;
      font-size: 1rem;
      border: none;
      border-radius: 10px;
      background: #ff0000;
      color: #111;
      cursor: pointer;
      box-shadow: 0 0 8px #ff0000cc;
      transition: background-color 0.25s ease;
    }
    button#retry:hover {
      background: #ff5555;
      box-shadow: 0 0 15px #ff5555cc;
    }
    /* Launch button style */
    button#launchBtn {
      margin-top: 1.5rem;
      padding: 1rem 2rem;
      font-family: monospace;
      font-weight: 700;
      font-size: 1.25rem;
      border: none;
      border-radius: 10px;
      background: #ffcc00;
      color: #0a0a0a;
      cursor: pointer;
      box-shadow: 0 0 10px #ffcc00cc;
      transition: background-color 0.3s ease;
    }
    button#launchBtn:disabled {
      background: #555;
      cursor: not-allowed;
      box-shadow: none;
    }
    button#launchBtn:hover:not(:disabled) {
      background: #ffdd33;
      box-shadow: 0 0 20px #ffdd33cc;
    }
    #firmware {
      font-size: 1.5rem;
      margin: 1rem 0;
      color: #ff3f3f;
      user-select: text;
    }
    #message {
      margin-top: 0.5rem;
      font-size: 1.3rem;
      color: #ff3f3f;
      user-select: text;
    }
  </style>
</head>
<body>

  <h1>PS4 GoldHEN Compatibility Checker 2.0</h1>
  <div id="status">Initializing detection...</div>
  <div id="result" class="result">Awaiting PS4 browser input...</div>
  <div id="ua" class="info">User-Agent: <em>Loading...</em></div>

  <p id="firmware">Detecting your PS4 firmware version...</p>
  <div id="message"></div>
  <button id="launchBtn" disabled>Launch GoldHEN Jailbreak</button>
  <button id="retry" style="display:none;">Retry Detection</button>

  <script>
    (function() {
      const compatibleFirmwares = [
        "5.05", "6.72",
        "7.00", "7.01", "7.02", "7.03", "7.04", "7.05",
        "7.50", "7.51", "7.52", "7.53", "7.54", "7.55",
        "8.00", "8.01", "8.02", "8.03", "8.04", "8.05",
        "8.50", "8.51", "8.52", "8.53", "8.54", "8.55",
        "9.00", "9.01", "9.02", "9.03", "9.04", "9.05",
        "9.50", "9.51", "9.52", "9.53", "9.54", "9.55",
        "11.00", "11.01", "11.02", "11.03", "11.04", "11.05",
        "11.50", "11.51", "11.52", "11.53", "11.54", "11.55"
      ];
      const borderlineFirmwares = [
        "10.00", "10.01", "10.50", "12.00", "12.01", "12.50"
      ];
      const karoHostUrls = {
        '5.05': 'https://karo218.ir/505N/',
        '6.72': 'https://karo218.ir/672N/',
        '7.00': 'https://karo218.ir/700N/',
        '7.50': 'https://karo218.ir/750N/',
        '8.00': 'https://karo218.ir/800N/',
        '8.50': 'https://karo218.ir/850N/',
        '9.00': 'https://karo218.ir/900N/',
        '9.50': 'https://karo218.ir/950N/',
        '11.00': 'https://karo218.ir/1100N/',
        '11.50': 'https://karo218.ir/1150N/'
        // Add more URLs if you want
      };

      const statusEl = document.getElementById("status");
      const resultEl = document.getElementById("result");
      const uaEl = document.getElementById("ua");
      const retryBtn = document.getElementById("retry");
      const firmwareEl = document.getElementById("firmware");
      const messageEl = document.getElementById("message");
      const launchBtn = document.getElementById("launchBtn");

      function extractFirmware(userAgent) {
        const patterns = [
          /PlayStation 4 (\d+\.\d+)/i,
          /PS4; (\d+\.\d+)/i,
          /PlayStation 4\/(\d+\.\d+)/i,
          /PlayStation 4[ ;](\d+\.\d+)/i
        ];
        for (const pattern of patterns) {
          const match = userAgent.match(pattern);
          if (match && match[1]) return match[1];
        }
        return null;
      }

      async function detectFirmware() {
        statusEl.textContent = "Scanning your PS4 firmware...";
        const ua = navigator.userAgent || "";
        uaEl.textContent = "User-Agent: " + ua;

        // simulate random delay for detection effect
        await new Promise(r => setTimeout(r, 150 + Math.random() * 350));

        const fw = extractFirmware(ua);

        if (!fw) {
          statusEl.textContent = "Firmware version NOT detected.";
          resultEl.textContent = "Open this page in the PS4 browser for accurate detection.";
          resultEl.className = "result not-compatible";
          retryBtn.style.display = "inline-block";
          firmwareEl.textContent = "PS4 firmware version not detected.";
          messageEl.textContent = "";
          launchBtn.disabled = true;
          return;
        }

        statusEl.textContent = `Detected PS4 Firmware: ${fw}`;
        firmwareEl.textContent = `Detected Firmware: ${fw}`;

        if (compatibleFirmwares.includes(fw)) {
          resultEl.textContent = "Your PS4 CAN RUN GoldHEN! ðŸŽ‰ Proceed with the ritual.";
          resultEl.className = "result compatible";
          messageEl.textContent = "Your firmware is supported! You can launch GoldHEN now.";
          launchBtn.disabled = false;
          launchBtn.onclick = () => {
            // Redirect to the right host URL if known, otherwise default page
            const url = karoHostUrls[fw] || "https://goldhen.org/";
            window.location.href = url;
          };
        } else if (borderlineFirmwares.includes(fw)) {
          resultEl.textContent = "Your PS4 firmware might be supported but is NOT officially confirmed.";
          resultEl.className = "result not-compatible";
          messageEl.textContent = "GoldHEN support may be unstable on your version.";
          launchBtn.disabled = true;
        } else {
          resultEl.textContent = "Your PS4 firmware is NOT supported by GoldHEN.";
          resultEl.className = "result not-compatible";
          messageEl.textContent = "Please downgrade or wait for future updates.";
          launchBtn.disabled = true;
        }

        retryBtn.style.display = "inline-block";
      }

      retryBtn.onclick = () => {
        launchBtn.disabled = true;
        resultEl.textContent = "Awaiting PS4 browser input...";
        resultEl.className = "result";
        firmwareEl.textContent = "Detecting your PS4 firmware version...";
        messageEl.textContent = "";
        statusEl.textContent = "Retrying detection...";
        retryBtn.style.display = "none";
        detectFirmware();
      };

      // Run detection on page load
      detectFirmware();

    })();
  </script>

</body>
</html>
